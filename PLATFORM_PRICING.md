# Platform Pricing Configuration

## ุงูุฃุณุนุงุฑ ุญุณุจ ุงูููุตุฉ

ุชู ุชููุฆุฉ ุงููุธุงู ุจุญูุซ ูู ููุตุฉ (Platform) ููุง ุฃุณุนุงุฑูุง ุงูุฎุงุตุฉ.

### ๐ ุฌุฏูู ุงูุฃุณุนุงุฑ

| ุงูููุตุฉ | ุงูุณุนุฑ ููู ูููู | ุฑุณูู ุงูุชูุตูู |
|--------|---------------|-------------|
| **Shein** (ุดู ุงู) | 6,500 IQD | 5,000 IQD |
| **Amazon** (ุฃูุงุฒูู) | 8,000 IQD | 5,000 IQD |
| **Sheglam** (ุดู ุฌูุงู) | 5,500 IQD | 5,000 IQD |
| **Other** (ุฃุฎุฑู) | 7,000 IQD | 5,000 IQD |

---

## ๐ข ููู ูุชู ุญุณุงุจ ุงูุณุนุฑุ

### ุงูุตูุบุฉ ุงูุนุงูุฉ:
```
ุงูุณุนุฑ ุงูููู = ุณุนุฑ ุงูุณูุฉ + ุฑุณูู ุงูุดุญู + ุชูููุฉ ุงูุชุบููู + ุฑุณูู ุงูุชูุตูู
```

### ุฑุณูู ุงูุดุญู ุชูุญุณุจ ูุงูุชุงูู:
```
ุฑุณูู ุงูุดุญู = ุงููุฒู (ูููู) ร ุงูุณุนุฑ ููู ูููู
```

**ูุซุงู:**
- 5 ูููู ูู Shein = 5 ร 6,500 = 32,500 IQD
- 3 ูููู ูู Amazon = 3 ร 8,000 = 24,000 IQD
- 2 ูููู ูู Sheglam = 2 ร 5,500 = 11,000 IQD

---

## ๐ก ุฃูุซูุฉ ุญุณุงุจูุฉ

### ูุซุงู 1: ุดุญูุฉ ูู Shein (5 ูููู)
```
ุณุนุฑ ุงูุณูุฉ: 50,000 IQD
ุงููุฒู: 5 ูุฌู
ุชูููุฉ ุงูุชุบููู: 0 IQD

ุงูุญุณุงุจ:
- ุฑุณูู ุงูุดุญู = 5 ร 6,500 = 32,500 IQD
- ุฑุณูู ุงูุชูุตูู = 5,000 IQD
- ุงูุณุนุฑ ุงูููู = 50,000 + 32,500 + 0 + 5,000 = 87,500 IQD
```

### ูุซุงู 2: ุดุญูุฉ ูู Shein (3 ูููู)
```
ุณุนุฑ ุงูุณูุฉ: 30,000 IQD
ุงููุฒู: 3 ูุฌู
ุชูููุฉ ุงูุชุบููู: 2,000 IQD

ุงูุญุณุงุจ:
- ุฑุณูู ุงูุดุญู = 3 ร 6,500 = 19,500 IQD
- ุฑุณูู ุงูุชูุตูู = 5,000 IQD
- ุงูุณุนุฑ ุงูููู = 30,000 + 19,500 + 2,000 + 5,000 = 56,500 IQD
```

### ูุซุงู 3: ุดุญูุฉ ูู Amazon (5 ูููู)
```
ุณุนุฑ ุงูุณูุฉ: 100,000 IQD
ุงููุฒู: 5 ูุฌู
ุชูููุฉ ุงูุชุบููู: 3,000 IQD

ุงูุญุณุงุจ:
- ุฑุณูู ุงูุดุญู = 5 ร 8,000 = 40,000 IQD
- ุฑุณูู ุงูุชูุตูู = 5,000 IQD
- ุงูุณุนุฑ ุงูููู = 100,000 + 40,000 + 3,000 + 5,000 = 148,000 IQD
```

### ูุซุงู 4: ุดุญูุฉ ูู Sheglam (2 ูููู - ุงูุฃุฑุฎุต)
```
ุณุนุฑ ุงูุณูุฉ: 40,000 IQD
ุงููุฒู: 2 ูุฌู
ุชูููุฉ ุงูุชุบููู: 0 IQD

ุงูุญุณุงุจ:
- ุฑุณูู ุงูุดุญู = 2 ร 5,500 = 11,000 IQD
- ุฑุณูู ุงูุชูุตูู = 5,000 IQD
- ุงูุณุนุฑ ุงูููู = 40,000 + 11,000 + 0 + 5,000 = 56,000 IQD
```

### ูุซุงู 5: ุดุญูุฉ ูู Other (10 ูููู)
```
ุณุนุฑ ุงูุณูุฉ: 80,000 IQD
ุงููุฒู: 10 ูุฌู
ุชูููุฉ ุงูุชุบููู: 5,000 IQD

ุงูุญุณุงุจ:
- ุฑุณูู ุงูุดุญู = 10 ร 7,000 = 70,000 IQD
- ุฑุณูู ุงูุชูุตูู = 5,000 IQD
- ุงูุณุนุฑ ุงูููู = 80,000 + 70,000 + 5,000 + 5,000 = 160,000 IQD
```

---

## ๐ API Endpoint

### ุงูุญุตูู ุนูู ุฃุณุนุงุฑ ุฌููุน ุงูููุตุงุช
```http
GET /admin/shipments/pricing
Authorization: Bearer <token>
```

#### Response:
```json
{
  "shein": {
    "pricePerKg": 6500,
    "defaultDeliveryFee": 5000,
    "defaultMaterialCost": 0,
    "currency": "IQD"
  },
  "amazon": {
    "pricePerKg": 8000,
    "defaultDeliveryFee": 5000,
    "defaultMaterialCost": 0,
    "currency": "IQD"
  },
  "sheglam": {
    "pricePerKg": 5500,
    "defaultDeliveryFee": 5000,
    "defaultMaterialCost": 0,
    "currency": "IQD"
  },
  "other": {
    "pricePerKg": 7000,
    "defaultDeliveryFee": 5000,
    "defaultMaterialCost": 0,
    "currency": "IQD"
  }
}
```

### ุญุณุงุจ ุงูุณุนุฑ ูุดุญูุฉ ูุนููุฉ
```http
POST /admin/shipments/calculate-price
Authorization: Bearer <token>
Content-Type: application/json

{
  "platform": "shein",
  "cartPrice": 50000,
  "weight": 3,
  "materialCost": 2000,
  "deliveryFee": 5000
}
```

#### Response:
```json
{
  "cartPrice": 50000,
  "shipmentFee": 6500,
  "materialCost": 2000,
  "deliveryFee": 5000,
  "totalPrice": 63500,
  "platform": "shein",
  "weight": 3
}
```

---

## โ๏ธ ููููุฉ ุชุนุฏูู ุงูุฃุณุนุงุฑ

ูุชุนุฏูู ุงูุฃุณุนุงุฑุ ูู ุจุชุญุฑูุฑ ููู:
```
src/admin/shipments/shipments.service.ts
```

ุงุจุญุซ ุนู `PLATFORM_PRICING` ููู ุจุชุนุฏูู ุงูููู:

```typescript
const PLATFORM_PRICING: Record<ShipmentPlatform, PlatformPricingConfig> = {
  [ShipmentPlatform.SHEIN]: {
    pricePerKg: 6500,          // ุงูุณุนุฑ ููู ูููู - ุนุฏู ููุง
    defaultDeliveryFee: 5000,  // ุฑุณูู ุงูุชูุตูู - ุนุฏู ููุง
    defaultMaterialCost: 0,    // ุชูููุฉ ุงูุชุบููู
    currency: 'IQD',
  },
  // ... ุจุงูู ุงูููุตุงุช
};
```

ุจุนุฏ ุงูุชุนุฏูู:
```bash
npm run build
npm run start:dev
```

---

## ๐ฑ ุงุณุชุฎุฏุงู ุงูุฃุณุนุงุฑ ูู Frontend

```typescript
// ุฌูุจ ุฃุณุนุงุฑ ุฌููุน ุงูููุตุงุช
const response = await fetch('http://localhost:3000/admin/shipments/pricing', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});
const pricing = await response.json();

// ุนุฑุถ ุฃุณุนุงุฑ Shein
console.log('Shein base fee:', pricing.shein.baseShipmentFee); // 6500
console.log('Shein delivery:', pricing.shein.defaultDeliveryFee); // 5000

// ุญุณุงุจ ุงูุณุนุฑ ูุดุญูุฉ ูุนููุฉ
const priceCalc = await fetch('http://localhost:3000/admin/shipments/calculate-price', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    platform: 'shein',
    cartPrice: 50000,
    weight: 3,
    materialCost: 2000
  })
});
const result = await priceCalc.json();
console.log('Total:', result.totalPrice); // 63500
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุฌููุน ุงูุฃุณุนุงุฑ ุจุงูุฏููุงุฑ ุงูุนุฑุงูู (IQD)**
2. **ุฑุณูู ุงูุชูุตูู ุซุงุจุชุฉ** ูุฌููุน ุงูููุตุงุช (5,000 IQD)
3. **ุงููุฒู ููุญุณุจ ุจุงูููููุฌุฑุงู**
4. **ุงููุฒู ุงูุฒุงุฆุฏ ูููุฑุจ ูุฃุนูู ุฑูู ุตุญูุญ** (ูุซูุงู: 5.3 ูุฌู = 6 ูุฌู)
5. **ุชูููุฉ ุงูุชุบููู ุงุฎุชูุงุฑูุฉ** ููููู ุชุฑููุง 0 ุฅุฐุง ูู ุชูู ูุทููุจุฉ
6. **ูููู ุชุฌุงูุฒ ุงูุญุณุงุจ ุงูุชููุงุฆู** ุนู ุทุฑูู ุชูุนูู `priceOverride` ูู API

---

## ๐ ุงูููุงุฑูุฉ ุจูู ุงูููุตุงุช

### ุงูุฃุฑุฎุต โ ุงูุฃุบูู (ููู ูููู):
1. ๐ฅ **Sheglam**: 5,500 IQD/ูุฌู (ุงูุฃุฑุฎุต)
2. ๐ฅ **Shein**: 6,500 IQD/ูุฌู
3. ๐ฅ **Other**: 7,000 IQD/ูุฌู
4. ๐ **Amazon**: 8,000 IQD/ูุฌู (ุงูุฃุบูู)

### ููุงุฑูุฉ ุดุญูุฉ 5 ูููู:
1. ๐ฅ **Sheglam**: 5 ร 5,500 = 27,500 IQD
2. ๐ฅ **Shein**: 5 ร 6,500 = 32,500 IQD
3. ๐ฅ **Other**: 5 ร 7,000 = 35,000 IQD
4. ๐ **Amazon**: 5 ร 8,000 = 40,000 IQD

### ููุงุฑูุฉ ุดุญูุฉ 10 ูููู:
1. ๐ฅ **Sheglam**: 10 ร 5,500 = 55,000 IQD
2. ๐ฅ **Shein**: 10 ร 6,500 = 65,000 IQD
3. ๐ฅ **Other**: 10 ร 7,000 = 70,000 IQD
4. ๐ **Amazon**: 10 ร 8,000 = 80,000 IQD

---

## โ ุงูุฎูุงุตุฉ

- โ๏ธ ูู ููุตุฉ ููุง ุฃุณุนุงุฑ ูุฎุชููุฉ
- โ๏ธ ุงูุฃุณุนุงุฑ ูุญููุธุฉ ูู ุงูุจุงู ุงูุฏ
- โ๏ธ ุงููุฑููุช ุงูุฏ ููููู ุฌูุจ ุงูุฃุณุนุงุฑ ุนุจุฑ API
- โ๏ธ ุงูุญุณุงุจ ุชููุงุฆู ุจูุงุกู ุนูู ุงูููุตุฉ ูุงููุฒู
- โ๏ธ ูููู ุชุนุฏูู ุงูุฃุณุนุงุฑ ุจุณูููุฉ ูู ุงูููุฏ

ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- Swagger Docs: http://localhost:3000/api
- Backend Code: `src/admin/shipments/shipments.service.ts`

